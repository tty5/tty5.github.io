# 文件io
### 同步io 阻塞含义
https://www.cnblogs.com/QG-whz/p/5469891.html

阻塞与非阻塞io区别
```
是否用O_NONBLOCK打开, 不可读状态时, 是否block, 对文件没有意义, 因为文件一直处于可读状态
网络中比如没有数据的时候是等待还是马上返回, 没有数据可读的时候, read系统调用返回-1，并把errno设置为EAGAIN
```

### 异步io
https://www.jiangmiao.org/blog/2290.html

提交的io请求本身为异步方式
```
1、初使化io_context
2、open文件取得fd
3、根据fd，buffer offset等息建立iocb
4、submit iocb到context
5、io_getevents取得events状态
6、回到3步
```

```
io_setup(nr_events, &ctx)
io_prep_pread(&cb, fd, buffer, buffer_size, 0);
io_submit(ctx, 1, &pcb);
io_getevents(ctx, 1, nr_events, events, 0);
event = &events[0];
event->obj为输入的pcb
cb里面有个data, 返回的event里面包含了这个data
```

