# linux 多进程读写文件

多进程读写文件逻辑
```write -> sys_write -> vfs_write -> do_sync_write -> ext4_file_write(inode)```

* 内核会收到用户态的fd, 在sys_write的时候, 会转化成file结构体, file里面有一个pod, 来标记读写位置, 在后面会转化成inode

* 对task对inode读写, inode有自己的锁

# 多进程独立file结构体的情况

* 在file层面都是独立的file结构体数据, 在inode层, 做锁, 串行进行读写
